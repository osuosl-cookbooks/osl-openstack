{
  "chef_type": "role",
  "description": "Base Openstack role for all openstack nodes",
  "env_run_lists": {},
  "json_class": "Chef::Role",
  "name": "openstack_base",
  "default_attributes": {
    "apache": {
      "contact": "hostmaster@osuosl.org"
    },
    "authorization": {
      "sudo": {
        "include_sudoers_d": true
      }
    },
    "openstack": {
      "compute": {
        "config": {
          "allow_same_net_traffic": "False",
          "ram_allocation_ratio": 5.0
        },
        "libvirt": {
          "virt_type": "kvm"
        },
        "network": {
          "force_dhcp_release": "true",
          "multi_host": "true",
          "service_type": "nova"
        }
      },
      "dashboard": {
        "keystone_default_role": "_member_",
        "ssl": {
          "cert": "horizon.pem",
          "cert_url": "file:///etc/pki/tls/certs/wildcard.pem",
          "chain": "wildcard-bundle.crt",
          "key": "horizon.key",
          "key_url": "file:///etc/pki/tls/private/wildcard.key"
        }
      },
      "developer_mode": false,
      "release": "icehouse",
      "secret": {
        "key_path": "/etc/chef/encrypted_data_bag_secret"
      },
      "sysctl": {
        "net.ipv4.conf.all.rp_filter": "0",
        "net.ipv4.conf.default.rp_filter": "0",
        "net.ipv4.ip_forward": "1"
      }
    }
  },
  "run_list": [
    "recipe[base::ifconfig]",
    "recipe[selinux::permissive]",
    "recipe[osl-openstack::default]",
    "recipe[openstack-common]",
    "recipe[openstack-common::logging]",
    "recipe[openstack-common::set_endpoints_by_interface]",
    "recipe[openstack-common::sysctl]",
    "recipe[openstack-common::openrc]"
  ]
}
