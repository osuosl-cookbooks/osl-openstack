#!/usr/bin/env ruby

# frozen_string_literal: true

require 'fog/openstack'
require 'openstack_taster'

FIXED_IP_ADDRESS = '140.211.168.64'
OPENSTACK_CREDS = {
  openstack_auth_url: ENV['OS_AUTH_URL'],
  openstack_username: ENV['OS_USERNAME'],
  openstack_tenant:   ENV['OS_TENANT_NAME'],
  openstack_api_key:  ENV['OS_PASSWORD']
}.freeze

compute = Fog::Compute::OpenStack.new(OPENSTACK_CREDS)
volume  = Fog::Volume::OpenStack.new(OPENSTACK_CREDS)
image   = Fog::Image::OpenStack.new(OPENSTACK_CREDS)
network = Fog::Network::OpenStack.new(OPENSTACK_CREDS)

OpenStackTaster.new(
  compute, volume, image, network,
  FIXED_IP_ADDRESS
).taste_all
